{"remainingRequest":"C:\\Users\\Meet\\Desktop\\Go训练Code\\springboot-movie-master\\vue-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Meet\\Desktop\\Go训练Code\\springboot-movie-master\\vue-app\\src\\views\\me\\Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Meet\\Desktop\\Go训练Code\\springboot-movie-master\\vue-app\\src\\views\\me\\Cart.vue","mtime":1702988759781},{"path":"C:\\Users\\Meet\\Desktop\\Go训练Code\\springboot-movie-master\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1702988404698},{"path":"C:\\Users\\Meet\\Desktop\\Go训练Code\\springboot-movie-master\\vue-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1702988410840}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBEZWxldGVDYXJ0QnlJZCwgTGlzdENhcnRzIH0gZnJvbSAiQC9hcGkvY2FydCI7DQppbXBvcnQgV2ViMyBmcm9tICd3ZWIzJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBpOiAwLA0KICAgICAgc3VjY2VzczogZmFsc2UsDQogICAgICBjZW50ZXJEaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgcHJpY2U6IDAsDQogICAgICBzZWxlY3RMaXN0OiBbXSwNCiAgICAgIGNoZWNrQWxsOiBmYWxzZSwNCiAgICAgIGNhcnRMaXN0OiBbXSwNCiAgICAgIHVpZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVpZCIpLA0KICAgICAgd2ViMzogbnVsbCwNCiAgICAgIGFjY291bnQ6IG51bGwsDQogICAgICBjeF9jb250cmFjdDogbnVsbCwNCiAgICAgIGN4X2NvbnRyYWN0QWRkcmVzczogJzB4MmNjMjg0MDA3Q0E3RDBiNUIzRDUwOTI1ZEI5NzEzYTRFMzI3RDlEOCcsDQogICAgICBjeF9jb250cmFjdEFCSTogWw0KICAgICAgICB7DQogICAgICAgICAgImlucHV0cyI6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgImludGVybmFsVHlwZSI6ICJ1aW50MjU2IiwNCiAgICAgICAgICAgICAgIm5hbWUiOiAidmFsdWUiLA0KICAgICAgICAgICAgICAidHlwZSI6ICJ1aW50MjU2Ig0KICAgICAgICAgICAgfQ0KICAgICAgICAgIF0sDQogICAgICAgICAgIm5hbWUiOiAic2VuZCIsDQogICAgICAgICAgIm91dHB1dHMiOiBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICJpbnRlcm5hbFR5cGUiOiAiYm9vbCIsDQogICAgICAgICAgICAgICJuYW1lIjogIiIsDQogICAgICAgICAgICAgICJ0eXBlIjogImJvb2wiDQogICAgICAgICAgICB9DQogICAgICAgICAgXSwNCiAgICAgICAgICAic3RhdGVNdXRhYmlsaXR5IjogInBheWFibGUiLA0KICAgICAgICAgICJ0eXBlIjogImZ1bmN0aW9uIg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgImlucHV0cyI6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgImludGVybmFsVHlwZSI6ICJhZGRyZXNzIHBheWFibGUiLA0KICAgICAgICAgICAgICAibmFtZSI6ICJfYmVuZWZpY2lhcnkiLA0KICAgICAgICAgICAgICAidHlwZSI6ICJhZGRyZXNzIg0KICAgICAgICAgICAgfQ0KICAgICAgICAgIF0sDQogICAgICAgICAgInN0YXRlTXV0YWJpbGl0eSI6ICJub25wYXlhYmxlIiwNCiAgICAgICAgICAidHlwZSI6ICJjb25zdHJ1Y3RvciINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgICJpbnB1dHMiOiBbXSwNCiAgICAgICAgICAibmFtZSI6ICJiZW5lZmljaWFyeSIsDQogICAgICAgICAgIm91dHB1dHMiOiBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICJpbnRlcm5hbFR5cGUiOiAiYWRkcmVzcyBwYXlhYmxlIiwNCiAgICAgICAgICAgICAgIm5hbWUiOiAiIiwNCiAgICAgICAgICAgICAgInR5cGUiOiAiYWRkcmVzcyINCiAgICAgICAgICAgIH0NCiAgICAgICAgICBdLA0KICAgICAgICAgICJzdGF0ZU11dGFiaWxpdHkiOiAidmlldyIsDQogICAgICAgICAgInR5cGUiOiAiZnVuY3Rpb24iDQogICAgICAgIH0NCiAgICAgIF0NCiAgICB9Ow0KICB9LA0KDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5sb2FkQ2FydHMoKTsNCiAgICB0aGlzLmNvbm5lY3RXZWIzKCk7DQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGNvbm5lY3RXZWIzKCkgew0KICAgICAgaWYgKHdpbmRvdy5ldGhlcmV1bSkgew0KICAgICAgICBjb25zdCB3ZWIzID0gbmV3IFdlYjMod2luZG93LmV0aGVyZXVtKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICB3aW5kb3cuZXRoZXJldW0uZW5hYmxlKCk7DQogICAgICAgICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCB3ZWIzLmV0aC5nZXRBY2NvdW50cygpOw0KICAgICAgICAgIHRoaXMuYWNjb3VudCA9IGFjY291bnRzWzBdOw0KICAgICAgICAgIHRoaXMud2ViMyA9IHdlYjM7DQogICAgICAgICAgdGhpcy5jeF9jb250cmFjdCA9IG5ldyB3ZWIzLmV0aC5Db250cmFjdCgNCiAgICAgICAgICAgICAgdGhpcy5jeF9jb250cmFjdEFCSSwNCiAgICAgICAgICAgICAgdGhpcy5jeF9jb250cmFjdEFkZHJlc3MNCiAgICAgICAgICApOw0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOw0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKHdpbmRvdy53ZWIzKSB7DQogICAgICAgIGNvbnN0IHdlYjMgPSB3aW5kb3cud2ViMzsNCiAgICAgICAgdGhpcy53ZWIzID0gd2ViMzsNCiAgICAgICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCB3ZWIzLmV0aC5nZXRBY2NvdW50cygpOw0KICAgICAgICB0aGlzLmFjY291bnQgPSBhY2NvdW50c1swXTsNCiAgICAgICAgdGhpcy5jeF9jb250cmFjdCA9IG5ldyB3ZWIzLmV0aC5Db250cmFjdCgNCiAgICAgICAgICAgIHRoaXMuY3hfY29udHJhY3RBQkksDQogICAgICAgICAgICB0aGlzLmN4X2NvbnRyYWN0QWRkcmVzcw0KICAgICAgICApOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgYWxlcnQoIuivt+WFiOWuieijhU1ldGFNYXNr6ZKx5YyF5bm26L+e5o6l5Lul5aSq5Z2K572R57uc44CCIik7DQogICAgICB9DQogICAgfSwNCg0KICAgIGxvYWRDYXJ0cygpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICBMaXN0Q2FydHModGhpcy51aWQpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmNhcnRMaXN0ID0gcmVzLmRhdGE7DQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhcnRMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICB0aGlzLnNlbGVjdExpc3RbaV0gPSB7DQogICAgICAgICAgICAgIGNoZWNrZWQ6IGZhbHNlLA0KICAgICAgICAgICAgICBjYXJ0OiB0aGlzLmNhcnRMaXN0W2ldLmNhcnQsDQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgfSwgNzAwKTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBoYW5kbGVDaGVjaygpIHsNCiAgICAgIHRoaXMuY2hlY2tPdXQoKTsNCiAgICB9LA0KDQogICAgaGFuZGxlQ2hlY2tBbGwoKSB7DQogICAgICBpZiAodGhpcy5jaGVja0FsbCkgew0KICAgICAgICB0aGlzLmNoYW5nZUFsbENoZWNrZWQodHJ1ZSk7DQogICAgICAgIHRoaXMuY2hlY2tPdXQoKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuY2hhbmdlQWxsQ2hlY2tlZChmYWxzZSk7DQogICAgICAgIHRoaXMucHJpY2UgPSAwOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBjaGFuZ2VBbGxDaGVja2VkKHN0YXR1cykgew0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlbGVjdExpc3QubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgdGhpcy5zZWxlY3RMaXN0W2ldLmNoZWNrZWQgPSBzdGF0dXM7DQogICAgICB9DQogICAgfSwNCg0KICAgIGNoZWNrT3V0KCkgew0KICAgICAgdGhpcy5wcmljZSA9IDA7DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VsZWN0TGlzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAodGhpcy5zZWxlY3RMaXN0W2ldLmNoZWNrZWQpIHsNCiAgICAgICAgICB0aGlzLnByaWNlICs9IHRoaXMuc2VsZWN0TGlzdFtpXS5jYXJ0LnByaWNlOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCg0KICAgIGhhbmRsZURlbGV0ZShpbmRleCkgew0KICAgICAgRGVsZXRlQ2FydEJ5SWQodGhpcy5jYXJ0TGlzdFtpbmRleF0uY2FydC5pZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMuY2FydExpc3Quc3BsaWNlKGluZGV4LCAxKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCg0KDQogICAgc3VibWl0Q2FydCgpIHsNCiAgICAgIGNvbnN0IHNlbGVjdGVkQ2FydHMgPSB0aGlzLnNlbGVjdExpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS5jaGVja2VkKTsNCiAgICAgIGlmIChzZWxlY3RlZENhcnRzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICBtZXNzYWdlOiAn6K+35YWI6YCJ5oup6KaB57uT566X55qE55S15b2x56WoJywNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgfSk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCg0KICAgICAgY29uc3QgdG90YWxQcmljZUV0aCA9IHRoaXMucHJpY2U7DQogICAgICBjb25zdCB0b3RhbFByaWNlV2VpID0gdGhpcy53ZWIzLnV0aWxzLnRvV2VpKHRvdGFsUHJpY2VFdGgudG9TdHJpbmcoKSwgJ2V0aGVyJyk7DQogICAgICBjb25zdCB0b3RhbFByaWNlSW50ID0gcGFyc2VJbnQodG90YWxQcmljZVdlaSk7DQoNCiAgICAgIC8vIOiwg+eUqOaZuuiDveWQiOe6pg0KICAgICAgdGhpcy53ZWIzLmV0aC5zZW5kVHJhbnNhY3Rpb24oew0KICAgICAgICBmcm9tOiB0aGlzLmFjY291bnQsDQogICAgICAgIHRvOiB0aGlzLmN4X2NvbnRyYWN0QWRkcmVzcywNCiAgICAgICAgdmFsdWU6IHRvdGFsUHJpY2VJbnQsDQogICAgICAgIGdhc1ByaWNlOiAnMzAwMDAwMDAwMCcsDQogICAgICAgIGdhczogJzEwMDAwMDAnDQogICAgICB9LCAoZXJyb3IsIHJlc3VsdCkgPT4gew0KICAgICAgICBpZiAoZXJyb3IpIHsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOw0KICAgICAgICAgIHRoaXMubG9hZENhcnRzKCk7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAn5pSv5LuY5oiQ5Yqf77yBJywNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIC8vIOa4heepuui0reeJqei9pg0KICAgICAgICAgIHNlbGVjdGVkQ2FydHMuZm9yRWFjaChjYXJ0ID0+IHsNCiAgICAgICAgICAgIERlbGV0ZUNhcnRCeUlkKGNhcnQuY2FydC5pZCkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAvLyDmiafooYzliKDpmaTmk43kvZzlkI7lho3ph43mlrDliqDovb3otK3nianovabliJfooagNCiAgICAgICAgICAgICAgICB0aGlzLmxvYWRDYXJ0cygpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCg0KDQogICAgc3VibWl0UGF5KCkgew0KICAgICAgY29uc3Qgc2VsZWN0ZWRDYXJ0cyA9IHRoaXMuc2VsZWN0TGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtLmNoZWNrZWQpOw0KICAgICAgY29uc3QgdG90YWxQcmljZSA9IHNlbGVjdGVkQ2FydHMucmVkdWNlKCh0b3RhbCwgaXRlbSkgPT4gdG90YWwgKyBpdGVtLmNhcnQucHJpY2UsIDApOw0KDQogICAgICB0aGlzLmN4X2NvbnRyYWN0Lm1ldGhvZHMuc2VuZCh0b3RhbFByaWNlKQ0KICAgICAgICAgIC5zZW5kKHsNCiAgICAgICAgICAgIGZyb206IHRoaXMuYWNjb3VudCwNCiAgICAgICAgICAgIHZhbHVlOiB0b3RhbFByaWNlDQogICAgICAgICAgfSkNCiAgICAgICAgICAub24oJ3RyYW5zYWN0aW9uSGFzaCcsIChoYXNoKSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygndHJhbnNhY3Rpb25IYXNoOicsIGhhc2gpOw0KICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5vbigncmVjZWlwdCcsIChyZWNlaXB0KSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygncmVjZWlwdDonLCByZWNlaXB0KTsNCiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5zdWNjZXNzID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMuY2VudGVyRGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfmlK/ku5jmiJDlip8nLA0KICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgLy8g5riF56m66LSt54mp6L2mDQogICAgICAgICAgICBzZWxlY3RlZENhcnRzLmZvckVhY2goY2FydCA9PiB7DQogICAgICAgICAgICAgIERlbGV0ZUNhcnRCeUlkKGNhcnQuY2FydC5pZCkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmNhcnRMaXN0ID0gdGhpcy5jYXJ0TGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtLmNhcnQuaWQgIT09IGNhcnQuY2FydC5pZCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLm9uKCdlcnJvcicsIChlcnJvcikgPT4gew0KICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpOw0KICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLmNlbnRlckRpYWxvZ1Zpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICBtZXNzYWdlOiAn5pSv5LuY5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VJywNCiAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src/views/me","sourcesContent":["<template>\r\n  <div style=\"width: 100%\">\r\n    <h3 style=\"letter-spacing: 1px;font-weight: 400;padding-bottom: 20px\">购物车</h3>\r\n\r\n    <div v-loading=\"loading\">\r\n\r\n      <el-card v-for=\"(item, index) in cartList\" :key=\"index\" class=\"box-card\">\r\n        <div>\r\n          <div style=\"float: left;line-height: 100px;padding-right: 20px\">\r\n            <el-checkbox @change=\"handleCheck\" v-model=\"selectList[index].checked\"></el-checkbox>\r\n          </div>\r\n          <div style=\"float: left;\">\r\n            <div class=\"item-film-name\">《{{ item.film.name }}》</div>\r\n            <div class=\"item-film-seat\">座位 : {{ item.cart.seats }}</div>\r\n            <div class=\"item-film-seat\">手机号码 : {{ item.cart.phone }}</div>\r\n            <div class=\"item-film-time\">开场时间 :\r\n              <span style=\"color: red\">{{ item.arrangement.date }} - {{ item.arrangement.startTime }}</span>\r\n            </div>\r\n          </div>\r\n          <div style=\"float: right;color: #f34d41;letter-spacing: 2px; line-height: 100px;padding-right: 5px\">\r\n            ￥{{ item.cart.price }}\r\n            <el-button @click=\"handleDelete(index)\"\r\n                       type=\"text\"\r\n                       style=\"color: red;padding-left: 50px\"\r\n                       icon=\"el-icon-delete\">删除\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n\r\n      <div v-if=\"cartList.length !==0\" style=\"height: 60px;background: #91949c\">\r\n        <div>\r\n          <div style=\"float: left;line-height: 60px;padding: 0 20px;font-size: 14px\">\r\n            <el-checkbox @change=\"handleCheckAll\" v-model=\"checkAll\">全 选</el-checkbox>\r\n          </div>\r\n          <el-button @click=\"submitCart\" type=\"text\" class=\"sub-btn\">全部结算</el-button>\r\n          <div class=\"order-footer1\">合计 : ￥{{ price }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <el-dialog\r\n        title=\"扫码支付\"\r\n        :show-close=\"false\"\r\n        width=\"30%\"\r\n        :visible.sync=\"centerDialogVisible\"\r\n    >\r\n      <div>\r\n        <img class=\"c-img\" src=\"../../assets/img/c.jpeg\" alt=\"\">\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button type=\"primary\" @click=\"submitPay\">支 付 成 功</el-button>\r\n  </span>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { DeleteCartById, ListCarts } from \"@/api/cart\";\r\nimport Web3 from 'web3';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      i: 0,\r\n      success: false,\r\n      centerDialogVisible: false,\r\n      loading: false,\r\n      price: 0,\r\n      selectList: [],\r\n      checkAll: false,\r\n      cartList: [],\r\n      uid: localStorage.getItem(\"uid\"),\r\n      web3: null,\r\n      account: null,\r\n      cx_contract: null,\r\n      cx_contractAddress: '0x2cc284007CA7D0b5B3D50925dB9713a4E327D9D8',\r\n      cx_contractABI: [\r\n        {\r\n          \"inputs\": [\r\n            {\r\n              \"internalType\": \"uint256\",\r\n              \"name\": \"value\",\r\n              \"type\": \"uint256\"\r\n            }\r\n          ],\r\n          \"name\": \"send\",\r\n          \"outputs\": [\r\n            {\r\n              \"internalType\": \"bool\",\r\n              \"name\": \"\",\r\n              \"type\": \"bool\"\r\n            }\r\n          ],\r\n          \"stateMutability\": \"payable\",\r\n          \"type\": \"function\"\r\n        },\r\n        {\r\n          \"inputs\": [\r\n            {\r\n              \"internalType\": \"address payable\",\r\n              \"name\": \"_beneficiary\",\r\n              \"type\": \"address\"\r\n            }\r\n          ],\r\n          \"stateMutability\": \"nonpayable\",\r\n          \"type\": \"constructor\"\r\n        },\r\n        {\r\n          \"inputs\": [],\r\n          \"name\": \"beneficiary\",\r\n          \"outputs\": [\r\n            {\r\n              \"internalType\": \"address payable\",\r\n              \"name\": \"\",\r\n              \"type\": \"address\"\r\n            }\r\n          ],\r\n          \"stateMutability\": \"view\",\r\n          \"type\": \"function\"\r\n        }\r\n      ]\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.loadCarts();\r\n    this.connectWeb3();\r\n  },\r\n\r\n  methods: {\r\n    async connectWeb3() {\r\n      if (window.ethereum) {\r\n        const web3 = new Web3(window.ethereum);\r\n        try {\r\n          window.ethereum.enable();\r\n          const accounts = await web3.eth.getAccounts();\r\n          this.account = accounts[0];\r\n          this.web3 = web3;\r\n          this.cx_contract = new web3.eth.Contract(\r\n              this.cx_contractABI,\r\n              this.cx_contractAddress\r\n          );\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      } else if (window.web3) {\r\n        const web3 = window.web3;\r\n        this.web3 = web3;\r\n        const accounts = await web3.eth.getAccounts();\r\n        this.account = accounts[0];\r\n        this.cx_contract = new web3.eth.Contract(\r\n            this.cx_contractABI,\r\n            this.cx_contractAddress\r\n        );\r\n      } else {\r\n        alert(\"请先安装MetaMask钱包并连接以太坊网络。\");\r\n      }\r\n    },\r\n\r\n    loadCarts() {\r\n      this.loading = true;\r\n      ListCarts(this.uid).then((res) => {\r\n        setTimeout(() => {\r\n          this.cartList = res.data;\r\n          for (let i = 0; i < this.cartList.length; i++) {\r\n            this.selectList[i] = {\r\n              checked: false,\r\n              cart: this.cartList[i].cart,\r\n            };\r\n          }\r\n          this.loading = false;\r\n        }, 700);\r\n      });\r\n    },\r\n\r\n    handleCheck() {\r\n      this.checkOut();\r\n    },\r\n\r\n    handleCheckAll() {\r\n      if (this.checkAll) {\r\n        this.changeAllChecked(true);\r\n        this.checkOut();\r\n      } else {\r\n        this.changeAllChecked(false);\r\n        this.price = 0;\r\n      }\r\n    },\r\n\r\n    changeAllChecked(status) {\r\n      for (let i = 0; i < this.selectList.length; i++) {\r\n        this.selectList[i].checked = status;\r\n      }\r\n    },\r\n\r\n    checkOut() {\r\n      this.price = 0;\r\n      for (let i = 0; i < this.selectList.length; i++) {\r\n        if (this.selectList[i].checked) {\r\n          this.price += this.selectList[i].cart.price;\r\n        }\r\n      }\r\n    },\r\n\r\n    handleDelete(index) {\r\n      DeleteCartById(this.cartList[index].cart.id).then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          this.cartList.splice(index, 1);\r\n        }\r\n      });\r\n    },\r\n\r\n\r\n    submitCart() {\r\n      const selectedCarts = this.selectList.filter(item => item.checked);\r\n      if (selectedCarts.length === 0) {\r\n        this.$message({\r\n          message: '请先选择要结算的电影票',\r\n          type: 'warning'\r\n        });\r\n        return;\r\n      }\r\n\r\n      const totalPriceEth = this.price;\r\n      const totalPriceWei = this.web3.utils.toWei(totalPriceEth.toString(), 'ether');\r\n      const totalPriceInt = parseInt(totalPriceWei);\r\n\r\n      // 调用智能合约\r\n      this.web3.eth.sendTransaction({\r\n        from: this.account,\r\n        to: this.cx_contractAddress,\r\n        value: totalPriceInt,\r\n        gasPrice: '3000000000',\r\n        gas: '1000000'\r\n      }, (error, result) => {\r\n        if (error) {\r\n          console.error(error);\r\n        } else {\r\n          console.log(result);\r\n          this.loadCarts();\r\n          this.$message({\r\n            message: '支付成功！',\r\n            type: 'success'\r\n          });\r\n          // 清空购物车\r\n          selectedCarts.forEach(cart => {\r\n            DeleteCartById(cart.cart.id).then(res => {\r\n              console.log(res);\r\n              if (res.success) {\r\n                // 执行删除操作后再重新加载购物车列表\r\n                this.loadCarts();\r\n              }\r\n            });\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n\r\n    submitPay() {\r\n      const selectedCarts = this.selectList.filter(item => item.checked);\r\n      const totalPrice = selectedCarts.reduce((total, item) => total + item.cart.price, 0);\r\n\r\n      this.cx_contract.methods.send(totalPrice)\r\n          .send({\r\n            from: this.account,\r\n            value: totalPrice\r\n          })\r\n          .on('transactionHash', (hash) => {\r\n            console.log('transactionHash:', hash);\r\n            this.loading = true;\r\n          })\r\n          .on('receipt', (receipt) => {\r\n            console.log('receipt:', receipt);\r\n            this.loading = false;\r\n            this.success = true;\r\n            this.centerDialogVisible = false;\r\n            this.$message({\r\n              message: '支付成功',\r\n              type: 'success'\r\n            });\r\n            // 清空购物车\r\n            selectedCarts.forEach(cart => {\r\n              DeleteCartById(cart.cart.id).then(res => {\r\n                console.log(res);\r\n                if (res.success) {\r\n                  this.cartList = this.cartList.filter(item => item.cart.id !== cart.cart.id);\r\n                }\r\n              });\r\n            });\r\n          })\r\n          .on('error', (error) => {\r\n            console.error('Error:', error);\r\n            this.loading = false;\r\n            this.centerDialogVisible = false;\r\n            this.$message({\r\n              message: '支付失败，请稍后重试',\r\n              type: 'error'\r\n            });\r\n          });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.box-card {\r\n  margin-bottom: 5px;\r\n}\r\n\r\n>>> .el-card__header {\r\n  background: #C0C4CC;\r\n}\r\n\r\n.item-film-img {\r\n  float: left;\r\n  width: 80px;\r\n  height: 100px;\r\n  padding-bottom: 20px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.item-film-name {\r\n  letter-spacing: 2px;\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n  padding-bottom: 13px;\r\n}\r\n\r\n.item-film-seat {\r\n  letter-spacing: 1px;\r\n  font-size: 12px;\r\n  padding-bottom: 8px;\r\n  padding-left: 10px;\r\n  color: #91949c;\r\n}\r\n\r\n\r\n.item-film-time {\r\n  font-size: 12px;\r\n  padding-left: 10px;\r\n  letter-spacing: 1px;\r\n  color: #91949c;\r\n}\r\n\r\n.c-img {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.sub-btn {\r\n  float: right;\r\n  color: #000000;\r\n  height: 60px;\r\n  width: 120px;\r\n  background: #f34d41;\r\n  letter-spacing: 2px;\r\n  line-height: 33px;\r\n  text-align: center;\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n}\r\n\r\n.order-footer1 {\r\n  float: right;\r\n  line-height: 60px;\r\n  padding-right: 40px;\r\n}\r\n\r\na {\r\n  color: #333333;\r\n}\r\n\r\n.di {\r\n  text-align: center;\r\n  font-size: 20px;\r\n  letter-spacing: 3px;\r\n  font-weight: bold;\r\n  padding-top: 10px;\r\n}\r\n</style>"]}]}